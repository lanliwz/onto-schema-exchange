
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>
    <meta name="description" content="A finite state machine chart with editable and interactive features." />
    <meta itemprop="description" content="A finite state machine chart with editable and interactive features." />
    <title>
      Workflow Diagram Editor with Labeled Transition Links | GoJS Diagramming Library
    </title>
  </head>

  <body>

    <div class="flex flex-col prose">
      <div class="w-full max-w-screen-xl mx-auto">
        <!-- * * * * * * * * * * * * * -->
        <!-- Start of GoJS sample code -->
        <script src="https://cdn.jsdelivr.net/npm/gojs@3.0.15"></script>
        <script id="model_template" src="/model/wf_model_template.js"></script>
        <div id="allSampleContent" class="p-4 w-full">
          <script id="code">

            // Show the diagram's model in JSON format
            function save() {
              document.getElementById('mySavedModel').value = myDiagram.model.toJson();
              myDiagram.isModified = false;
            }
            function load() {
              myDiagram.model = go.Model.fromJson(document.getElementById('mySavedModel').value);
            }

            window.addEventListener('DOMContentLoaded', init_diagram);
          </script>
          <script id="broadcast_js">
                const socket = new WebSocket("ws://localhost:8000/ws_broadcast");

                socket.onmessage = function(event) {
                  document.getElementById("log").value += "\nReceived: " + event.data;
                };

                function sendMessage() {
                  const input = document.getElementById("msgInput");
                  socket.send(input.value);
                  document.getElementById("log").value += "\nSent: " + input.value;
                  input.value = "";
                }

                socket.onclose = function() {
                  alert("WebSocket connection closed");
                };
          </script>
  <div id="myDiagramDiv" style="border: solid 1px black; width: 100%; height: 470px; background: whitesmoke"></div>
  <div>
    <div>
  <textarea id="log" rows="10" cols="50" readonly></textarea><br>
  <input type="text" id="msgInput" placeholder="Type a message..." />
  <button onclick="sendMessage()">Send</button>


    </div>
  </div>
</div>
        </div>
      </div>
  </body>
</html>